{"version":3,"sources":["App.js","lazyLoadScript.js","reportWebVitals.js","index.js"],"names":["DEFAULT_STACK_PROGRAM","DEFAULT_IFRAME_CONTENT","createSrcAttr","html","escape","App","Tabs","cdk","cfn","dia","about","InitialTab","window","location","hash","replace","DefaultTab","Object","values","includes","state","tab","dirty","template","source","rendered","componentDidMount","Stack","CDK","require","emitter","on","assembly","app","a","stack","node","children","filter","isStack","PseudoCli","render","getStackByName","id","setState","updateTemplate","componentWillUnmount","off","program","eval","trim","handleOnEditorChanged","synthesize","this","props","width","height","className","defaultActiveKey","activeKey","onSelect","eventKey","title","theme","path","language","defaultValue","onChange","tabClassName","options","readOnly","value","JSON","stringify","style","boxShadow","src","stripIndent","version","variant","onClick","React","Component","lazyLoadScript","scripts","Array","from","document","getElementsByTagName","map","s","Promise","resolve","reject","script","createElement","type","body","parentNode","insertBefore","addEventListener","e","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Index","ready","errors","handleOnError","error","message","reason","console","initErrorHandling","onerror","file","line","col","freeErrorHandling","undefined","removeEventListener","AWS","canRender","Container","fluid","length","Alert","dismissible","onClose","Heading","wrapperClass","color","ariaLabel","href","ResizeAwareIndex","withResizeDetector","ReactDOM","getElementById"],"mappings":"q+DAQMA,sBAAqB,glBAoBrBC,uBAAyB,sBACzBC,cAAgB,SAACC,GAAD,MAAU,gCAAkCC,OAAOD,IAEnEE,I,woBACJC,KAAO,CACLC,IAAK,MACLC,IAAK,MACLC,IAAK,UACLC,MAAO,S,MAGTC,WAAaC,OAAOC,SAASC,KAAKC,QAAQ,IAAK,I,MAC/CC,WAAaC,OAAOC,OAAO,MAAKZ,MAAMa,SAAS,MAAKR,YAAc,MAAKA,WAAa,MAAKL,KAAKC,I,MAE9Fa,MAAQ,CACNC,IAAK,MAAKL,WACVM,OAAO,EACPC,SAAU,GACVC,OAAQxB,sBACRyB,SAAUvB,cAAcD,yB,MAG1ByB,kBAAoB,WAClB,IAAQC,EAAUf,OAAOgB,IAAIC,QAAQ,eAA7BF,MACRf,OAAOgB,IAAIE,QAAQC,GAAG,QAAtB,oRAA+B,WAAOC,EAAUC,GAAjB,wIAAAC,EAAA,6DACvBC,EAAQF,EAAIG,KAAKC,SAASC,OAAOX,EAAMY,SAAS,GADzB,SAEN,IAAI3B,OAAOgB,IAAIY,UAAU,CAAEL,UAASM,SAF9B,OAEvBhB,EAFuB,OAGvBF,EAAWS,EAASU,eAAeP,EAAMC,KAAKO,IAAIpB,SACxD,MAAKqB,SAAS,CAAErB,WAAUE,SAAUvB,cAAcuB,GAAWH,OAAO,IAJvC,2CAA/B,yDAMA,MAAKuB,kB,MAGPC,qBAAuB,WACrBlC,OAAOgB,IAAIE,QAAQiB,IAAI,U,MAGzBF,e,mQAAiB,+KAAAX,EAAA,+FAAOc,QAAP,8CAAiBhD,sBAAjB,kCAGPiD,KAAKD,QAAQE,QAHN,6FAKb,MAAKN,SAAS,CAAErB,SAAU,GAAIE,SAAUvB,cAAcD,wBAAyBqB,OAAO,IALzE,qF,MAUjB6B,sBAAwB,SAAC3B,GACvB,MAAKoB,SAAS,CAAEpB,SAAQF,OAAO,K,MAGjC8B,W,mQAAa,2IAAAlB,EAAA,sEACL,MAAKW,eAAe,MAAKzB,MAAMI,QAD1B,OAEX,MAAKoB,SAAS,CAAEtB,OAAO,EAAOD,IAAK,MAAKf,KAAKE,MAFlC,2C,qKAKb,WAAU,IAAD,OACP,EAA0B6C,KAAKC,MAAvBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OAAOD,EAAQ,GAAKC,EAAS,EAC3B,iIACE,6DAAC,gDAAD,CACEC,UAAU,OACVC,iBAAkBL,KAAKrC,WACvB2C,UAAWN,KAAKjC,MAAMC,IACtBuC,SAAU,SAACvC,GAGT,GAFA,EAAKuB,SAAS,CAAEvB,QAChBT,OAAOC,SAASC,KAAhB,WAA2BO,GACvBA,IAAQ,EAAKf,KAAKE,IAAK,OAAO,EAAK4C,cAP3C,UAUE,4DAAC,gDAAD,CAAKS,SAAUR,KAAK/C,KAAKC,IAAKuD,MAAOT,KAAK/C,KAAKC,IAA/C,SACE,4DAAC,oDAAD,CACEgD,MAAK,UAAKA,EAAL,MACLC,OAAM,UAAKA,EAAL,MACNO,MAAM,UACNC,KAAK,SACLC,SAAS,aACTC,aAAclE,sBACdmE,SAAUd,KAAKF,0BAGnB,4DAAC,gDAAD,CACEU,SAAUR,KAAK/C,KAAKE,IACpBsD,MAAK,UAAKT,KAAK/C,KAAKE,KAAf,OAAqB6C,KAAKjC,MAAME,MAAQ,IAAM,IACnD8C,aACEf,KAAKjC,MAAME,MAAQ,+CAAiD,mCAJxE,SAOE,4DAAC,oDAAD,CACEiC,MAAK,UAAKA,EAAL,MACLC,OAAM,UAAKA,EAAL,MACNO,MAAM,UACNC,KAAM,oBACNK,QAAS,CAAEC,UAAU,GACrBL,SAAS,OACTM,MAAOC,KAAKC,UAAUpB,KAAKjC,MAAMG,SAAU,KAAM,OAGrD,4DAAC,gDAAD,CACEuC,MAAOT,KAAK/C,KAAKG,IACjBoD,SAAUR,KAAK/C,KAAKG,IACpBiE,MAAO,CAAEC,UAAW,oBACpBP,aAAa,mCAJf,SAME,4DAAC,4CAAD,CAAQb,MAAK,UAAKA,EAAL,MAAgBC,OAAM,UAAKA,EAAL,MAAiBoB,IAAKvB,KAAKjC,MAAMK,aAEtE,4DAAC,gDAAD,CAAKoC,SAAUR,KAAK/C,KAAKI,MAAOoD,MAAOT,KAAK/C,KAAKI,MAAjD,SACE,4DAAC,oDAAD,CACE6C,MAAK,UAAKA,EAAL,MACLC,OAAM,UAAKA,EAAL,MACNO,MAAM,UACNC,KAAK,WACLK,QAAS,CAAEC,UAAU,GACrBL,SAAS,WACTM,MAAOM,oDAAY,oKAAD,OAKGhD,oBAAQ,IAAmBiD,QAL9B,kDAMOjD,oBAAQ,IAA4BiD,QAN3C,iDAOMjD,oBAAQ,IAA2BiD,QAPzC,4HAcvBzB,KAAKjC,MAAMC,MAAQgC,KAAK/C,KAAKC,KAC5B,4DAAC,gDAAD,CAAQwE,QAAQ,UAAUtB,UAAU,qCAAqCuB,QAAS3B,KAAKD,WAAvF,2BAKF,S,KAnIU6B,6CAAMC,WAuIT7E,2B,ynICnJA8E,EAnBQ,WAAe,IAAdP,EAAa,uDAAP,GACtBQ,EAAUC,MAAMC,KAAKC,SAASC,qBAAqB,WAAWC,KAClE,SAACC,GAAD,OAAOA,EAAEd,OAEX,OAAIQ,EAAQjE,SAASyD,GACZ,IAAIe,SAAQ,SAACC,GAAD,OAAaA,OAE3B,IAAID,SAAQ,SAACC,EAASC,GAAY,IAAD,EAChCC,EAASP,SAASQ,cAAc,UACtCD,EAAOE,KAAO,kBACdF,EAAOlB,IAAMA,EACb,IAAMqB,EAAOV,SAASC,qBAAqB,QAAQ,GAC/C,OAAJS,QAAI,IAAJA,GAAA,UAAAA,EAAMC,kBAAN,SAAkBC,aAAaL,EAAQG,GACvCH,EAAOM,iBAAiB,QAAQ,SAACC,GAC/BT,EAAQS,UCFCC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,iCCURQ,E,4MACJ3F,MAAQ,CAAE4F,OAAO,EAAOC,OAAQ,I,EAEhCC,cAAgB,SAACC,GACf,IAAMC,EAAUD,EAAMC,SAAWD,EAAME,OAAOD,SAAW,yCACzDE,QAAQH,MAAM,+BAAgCA,GAC9C,EAAKvE,SAAS,CAAEqE,OAAO,CAAEG,GAAH,mBAAe,EAAKhG,MAAM6F,Y,EAGlDM,kBAAoB,WAClB3G,OAAO4G,QAAU,SAACJ,EAASK,EAAMC,EAAMC,EAAKR,GAE1C,OADA,EAAKD,cAAcC,IACZ,GAETvG,OAAOwF,iBAAiB,SAAS,SAACC,GAEhC,OADA,EAAKa,cAAcb,EAAEc,QACd,KAETvG,OAAOwF,iBAAiB,sBAAsB,SAACC,GAC7C,EAAKa,cAAcb,EAAEgB,Y,EAIzBO,kBAAoB,WAClBhH,OAAO4G,aAAUK,EACjBjH,OAAOkH,oBAAoB,QAAS,EAAKZ,eACzCtG,OAAOkH,oBAAoB,qBAAsB,EAAKZ,gB,EAGxDxF,kBAAoB,WAClB,EAAK6F,oBACD3G,OAAOmH,KAAOnH,OAAOgB,IAAK,EAAKgB,SAAS,CAAEoE,OAAO,IAEnD7B,EAAe,wDAAwDsB,MAAK,kBAC1EtB,EAAe,cAAcsB,MAAK,WAChC,EAAK7D,SAAS,CAAEoE,OAAO,W,EAM/BlE,qBAAuB,WACrB,EAAK8E,qB,EAGPI,UAAY,WACV,MAA0B,EAAK1E,MAAvBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OAAOD,EAAQ,GAAKC,EAAS,GAAK,EAAKpC,MAAM4F,YAAwBa,IAAfjH,OAAOgB,UAAoCiG,IAAfjH,OAAOmH,K,4CAG3F,WAAU,IAAD,OACP,EAA0B1E,KAAKC,MAAvBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OACf,OACE,eAACyE,EAAA,EAAD,CAAWC,OAAK,EAACzE,UAAU,sBAA3B,UACGJ,KAAK2E,YACJ,qCACG3E,KAAKjC,MAAM6F,OAAOkB,OAAS,GAC1B,eAACC,EAAA,EAAD,CAAOC,aAAW,EAACtD,QAAQ,SAASuD,QAAS,kBAAM,EAAK1F,SAAS,CAAEqE,OAAQ,MAA3E,UACE,cAACmB,EAAA,EAAMG,QAAP,6CACA,2DACA,mBAAG9E,UAAU,iBAAb,SACGJ,KAAKjC,MAAM6F,OAAOxB,KAAI,SAACY,GAAD,OACrB,iCACE,uCADF,KACkB,gCAAQA,IACxB,yBAFSA,WAQnB,cAAChG,EAAA,EAAD,CAAKkD,MAAOA,EAAOC,OAAQA,OAG7B,cAAC,IAAD,CAAMgF,aAAa,kBAAkBhF,OAAO,MAAMD,MAAM,MAAMkF,MAAM,UAAUC,UAAU,YAE1F,mBACEjF,UAAU,qBACVkF,KAAK,mCACL,cAAY,sBACZ7E,MAAM,sBAJR,wC,GA3EYmB,IAAMC,WAwFpB0D,EAAmBC,YAAmB9B,GAC5C+B,IAASrG,OAAO,cAACmG,EAAD,IAAsBrD,SAASwD,eAAe,SAI9DzC,M","file":"static/js/main.f0da2865.chunk.js","sourcesContent":["/// <reference types=\"..\" />\n\nimport React from \"react\";\nimport Iframe from \"react-iframe\";\nimport stripIndent from \"strip-indent\";\nimport Editor from \"@monaco-editor/react\";\nimport { Button, Tab, Tabs, OverlayTrigger } from \"react-bootstrap\";\n\nconst DEFAULT_STACK_PROGRAM = `\\\n// go to \"CFN\" tab ^ to synth.\n\nconst cdk = CDK.require(\"aws-cdk-lib\");\nconst ec2 = CDK.require(\"aws-cdk-lib/aws-ec2\");\nconst sqs = CDK.require(\"aws-cdk-lib/aws-sqs\");\nconst sns = CDK.require(\"aws-cdk-lib/aws-sns\");\nconst s3 = CDK.require(\"aws-cdk-lib/aws-s3\");\n\nconst app = new cdk.App();\nconst stack = new cdk.Stack(app, \"BrowserStack\");\nconst vpc = new ec2.Vpc(stack, \"VPC\");\nconst queue = new sqs.Queue(stack, \"Queue\");\nconst topic = new sns.Topic(stack, \"Topic\");\nconst bucket = new s3.Bucket(stack, \"Bucket\");\n\nconst cli = new CDK.PseudoCli({ stack });\ncli.synth();\n`;\n\nconst DEFAULT_IFRAME_CONTENT = \"javascript:void(0);\";\nconst createSrcAttr = (html) => \"data:text/html;charset=utf-8,\" + escape(html);\n\nclass App extends React.Component {\n  Tabs = {\n    cdk: \"cdk\",\n    cfn: \"cfn\",\n    dia: \"diagram\",\n    about: \"about\",\n  };\n\n  InitialTab = window.location.hash.replace(\"#\", \"\");\n  DefaultTab = Object.values(this.Tabs).includes(this.InitialTab) ? this.InitialTab : this.Tabs.cdk;\n\n  state = {\n    tab: this.DefaultTab,\n    dirty: true,\n    template: {},\n    source: DEFAULT_STACK_PROGRAM,\n    rendered: createSrcAttr(DEFAULT_IFRAME_CONTENT),\n  };\n\n  componentDidMount = () => {\n    const { Stack } = window.CDK.require(\"aws-cdk-lib\");\n    window.CDK.emitter.on(\"synth\", async (assembly, app) => {\n      const stack = app.node.children.filter(Stack.isStack)[0];\n      const rendered = await new window.CDK.PseudoCli({ stack }).render();\n      const template = assembly.getStackByName(stack.node.id).template;\n      this.setState({ template, rendered: createSrcAttr(rendered), dirty: true });\n    });\n    this.updateTemplate();\n  };\n\n  componentWillUnmount = () => {\n    window.CDK.emitter.off(\"synth\");\n  };\n\n  updateTemplate = async (program = DEFAULT_STACK_PROGRAM) => {\n    try {\n      // eslint-disable-next-line no-eval\n      await eval(program.trim());\n    } catch (err) {\n      this.setState({ template: {}, rendered: createSrcAttr(DEFAULT_IFRAME_CONTENT), dirty: false });\n      throw err;\n    }\n  };\n\n  handleOnEditorChanged = (source) => {\n    this.setState({ source, dirty: true });\n  };\n\n  synthesize = async () => {\n    await this.updateTemplate(this.state.source);\n    this.setState({ dirty: false, tab: this.Tabs.cfn });\n  };\n\n  render() {\n    const { width, height } = this.props;\n    return width > 0 && height > 0 ? (\n      <>\n        <Tabs\n          className=\"mb-3\"\n          defaultActiveKey={this.DefaultTab}\n          activeKey={this.state.tab}\n          onSelect={(tab) => {\n            this.setState({ tab });\n            window.location.hash = `#${tab}`;\n            if (tab === this.Tabs.cfn) return this.synthesize();\n          }}\n        >\n          <Tab eventKey={this.Tabs.cdk} title={this.Tabs.cdk}>\n            <Editor\n              width={`${width}px`}\n              height={`${height}px`}\n              theme=\"vs-dark\"\n              path=\"app.js\"\n              language=\"javascript\"\n              defaultValue={DEFAULT_STACK_PROGRAM}\n              onChange={this.handleOnEditorChanged}\n            />\n          </Tab>\n          <Tab\n            eventKey={this.Tabs.cfn}\n            title={`${this.Tabs.cfn}${this.state.dirty ? \"*\" : \"\"}`}\n            tabClassName={\n              this.state.dirty ? \"font-weight-bold text-uppercase text-warning\" : \"font-weight-light text-lowercase\"\n            }\n          >\n            <Editor\n              width={`${width}px`}\n              height={`${height}px`}\n              theme=\"vs-dark\"\n              path={\"cfn-template.json\"}\n              options={{ readOnly: true }}\n              language=\"json\"\n              value={JSON.stringify(this.state.template, null, 2)}\n            />\n          </Tab>\n          <Tab\n            title={this.Tabs.dia}\n            eventKey={this.Tabs.dia}\n            style={{ boxShadow: \"0 0 5px 5px #111\" }}\n            tabClassName=\"font-weight-light text-lowercase\"\n          >\n            <Iframe width={`${width}px`} height={`${height}px`} src={this.state.rendered} />\n          </Tab>\n          <Tab eventKey={this.Tabs.about} title={this.Tabs.about}>\n            <Editor\n              width={`${width}px`}\n              height={`${height}px`}\n              theme=\"vs-dark\"\n              path=\"ABOUT.md\"\n              options={{ readOnly: true }}\n              language=\"markdown\"\n              value={stripIndent(`\\\n                # CDK WEB Playground\n                Try out AWS CDK directly in your browser!\n\n                ## versions\n                cdk-web version: ${require(\"../package.json\").version}\n                aws-cdk-lib version: ${require(\"aws-cdk-lib/package.json\").version}\n                constructs version: ${require(\"constructs/package.json\").version}\n\n                ## help and support:\n                go to the repository: https://github.com/3p3r/cdk-web/`)}\n            />\n          </Tab>\n        </Tabs>\n        {this.state.tab === this.Tabs.cdk && (\n          <Button variant=\"warning\" className=\"position-absolute synthesis-button\" onClick={this.synthesize}>\n            Synthesize\n          </Button>\n        )}\n      </>\n    ) : null;\n  }\n}\n\nexport default App;\n","const lazyLoadScript = (src = \"\") => {\n  const scripts = Array.from(document.getElementsByTagName(\"script\")).map(\n    (s) => s.src\n  );\n  if (scripts.includes(src)) {\n    return new Promise((resolve) => resolve());\n  }\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    const body = document.getElementsByTagName(\"body\")[0];\n    body?.parentNode?.insertBefore(script, body);\n    script.addEventListener(\"load\", (e) => {\n      resolve(e);\n    });\n  });\n};\n\nexport default lazyLoadScript;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","/// <reference types=\"..\" />\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Grid } from \"react-loader-spinner\";\nimport { Alert, Container } from \"react-bootstrap\";\nimport { withResizeDetector } from \"react-resize-detector\";\n\nimport App from \"./App\";\nimport lazyLoadScript from \"./lazyLoadScript\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"github-fork-ribbon-css/gh-fork-ribbon.css\";\nimport \"@forevolve/bootstrap-dark/dist/css/bootstrap-dark.min.css\";\nimport \"./index.css\";\n\nclass Index extends React.Component {\n  state = { ready: false, errors: [] };\n\n  handleOnError = (error) => {\n    const message = error.message || error.reason.message || \"unknown error, check your dev console.\";\n    console.error(\"cdk-web encountered an error\", error);\n    this.setState({ errors: [message, ...this.state.errors] });\n  };\n\n  initErrorHandling = () => {\n    window.onerror = (message, file, line, col, error) => {\n      this.handleOnError(error);\n      return false;\n    };\n    window.addEventListener(\"error\", (e) => {\n      this.handleOnError(e.error);\n      return false;\n    });\n    window.addEventListener(\"unhandledrejection\", (e) => {\n      this.handleOnError(e.reason);\n    });\n  };\n\n  freeErrorHandling = () => {\n    window.onerror = undefined;\n    window.removeEventListener(\"error\", this.handleOnError);\n    window.removeEventListener(\"unhandledrejection\", this.handleOnError);\n  };\n\n  componentDidMount = () => {\n    this.initErrorHandling();\n    if (window.AWS && window.CDK) this.setState({ ready: true });\n    else {\n      lazyLoadScript(\"https://sdk.amazonaws.com/js/aws-sdk-2.1000.0.min.js\").then(() =>\n        lazyLoadScript(\"cdk-web.js\").then(() => {\n          this.setState({ ready: true });\n        })\n      );\n    }\n  };\n\n  componentWillUnmount = () => {\n    this.freeErrorHandling();\n  };\n\n  canRender = () => {\n    const { width, height } = this.props;\n    return width > 0 && height > 0 && this.state.ready && window.CDK !== undefined && window.AWS !== undefined;\n  };\n\n  render() {\n    const { width, height } = this.props;\n    return (\n      <Container fluid className=\"w-100 h-100 p-0 m-0\">\n        {this.canRender() ? (\n          <>\n            {this.state.errors.length > 0 && (\n              <Alert dismissible variant=\"danger\" onClose={() => this.setState({ errors: [] })}>\n                <Alert.Heading>Oh snap! CDK Synthesis failed!</Alert.Heading>\n                <p>check error message below:</p>\n                <p className=\"text-monospace\">\n                  {this.state.errors.map((e) => (\n                    <span key={e}>\n                      <em>error</em>: <small>{e}</small>\n                      <br />\n                    </span>\n                  ))}\n                </p>\n              </Alert>\n            )}\n            <App width={width} height={height} />\n          </>\n        ) : (\n          <Grid wrapperClass=\"loading-spinner\" height=\"100\" width=\"100\" color=\"#5050EC\" ariaLabel=\"loading\" />\n        )}\n        <a\n          className=\"github-fork-ribbon\"\n          href=\"https://github.com/3p3r/cdk-web/\"\n          data-ribbon=\"Fork this on GitHub\"\n          title=\"Fork this on GitHub\"\n        >\n          Fork this on GitHub\n        </a>\n      </Container>\n    );\n  }\n}\n\nconst ResizeAwareIndex = withResizeDetector(Index);\nReactDOM.render(<ResizeAwareIndex />, document.getElementById(\"root\"));\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}