{"version":3,"sources":["App.js","lazyLoadScript.js","reportWebVitals.js","index.js"],"names":["DEFAULT_STACK_PROGRAM","DEFAULT_IFRAME_CONTENT","createSrcAttr","html","escape","App","Tabs","cdk","cfn","dia","about","InitialTab","window","location","hash","replace","DefaultTab","Object","values","includes","state","tab","dirty","template","source","rendered","componentDidMount","updateTemplate","a","program","eval","trim","CDK","PseudoCli","render","setState","handleOnEditorChanged","synthesize","this","props","width","height","className","defaultActiveKey","activeKey","onSelect","eventKey","title","theme","path","language","defaultValue","onChange","tabClassName","options","readOnly","value","JSON","stringify","style","boxShadow","src","stripIndent","require","version","variant","onClick","React","Component","lazyLoadScript","scripts","Array","from","document","getElementsByTagName","map","s","Promise","resolve","reject","script","createElement","type","body","parentNode","insertBefore","addEventListener","e","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Index","ready","errors","handleOnError","error","message","reason","console","initErrorHandling","onerror","file","line","col","freeErrorHandling","undefined","removeEventListener","AWS","componentWillUnmount","canRender","Container","fluid","length","Alert","dismissible","onClose","Heading","wrapperClass","color","ariaLabel","href","ResizeAwareIndex","withResizeDetector","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.f5ff1c69.chunk.js","sourcesContent":["/// <reference types=\"..\" />\n\nimport React from \"react\";\nimport Iframe from \"react-iframe\";\nimport stripIndent from \"strip-indent\";\nimport Editor from \"@monaco-editor/react\";\nimport { Button, Tab, Tabs, OverlayTrigger } from \"react-bootstrap\";\n\nconst DEFAULT_STACK_PROGRAM = `\\\n// go to \"CFN\" tab ^ to synth.\n\nconst cdk = CDK.require(\"aws-cdk-lib\");\nconst ec2 = CDK.require(\"aws-cdk-lib/aws-ec2\");\nconst sqs = CDK.require(\"aws-cdk-lib/aws-sqs\");\nconst sns = CDK.require(\"aws-cdk-lib/aws-sns\");\nconst s3 = CDK.require(\"aws-cdk-lib/aws-s3\");\n\nconst app = new cdk.App();\nconst stack = new cdk.Stack(app, \"BrowserStack\");\nconst vpc = new ec2.Vpc(stack, \"VPC\");\nconst queue = new sqs.Queue(stack, \"Queue\");\nconst topic = new sns.Topic(stack, \"Topic\");\nconst bucket = new s3.Bucket(stack, \"Bucket\");\n\nconst cli = new CDK.PseudoCli({ stack });\ncli.synth();\n`;\n\nconst DEFAULT_IFRAME_CONTENT = \"javascript:void(0);\";\nconst createSrcAttr = (html) => \"data:text/html;charset=utf-8,\" + escape(html);\n\nclass App extends React.Component {\n  Tabs = {\n    cdk: \"cdk\",\n    cfn: \"cfn\",\n    dia: \"diagram\",\n    about: \"about\",\n  };\n\n  InitialTab = window.location.hash.replace(\"#\", \"\");\n  DefaultTab = Object.values(this.Tabs).includes(this.InitialTab) ? this.InitialTab : this.Tabs.cdk;\n\n  state = {\n    tab: this.DefaultTab,\n    dirty: true,\n    template: {},\n    source: DEFAULT_STACK_PROGRAM,\n    rendered: createSrcAttr(DEFAULT_IFRAME_CONTENT),\n  };\n\n  componentDidMount = () => {\n    this.updateTemplate();\n  };\n\n  updateTemplate = async (program = DEFAULT_STACK_PROGRAM) => {\n    try {\n      // eslint-disable-next-line no-eval\n      const template = await eval(program.trim());\n      const rendered = await new window.CDK.PseudoCli().render({ template });\n      this.setState({ template, rendered: createSrcAttr(rendered), dirty: true });\n    } catch (err) {\n      this.setState({ template: {}, rendered: createSrcAttr(DEFAULT_IFRAME_CONTENT), dirty: false });\n      throw err;\n    }\n  };\n\n  handleOnEditorChanged = (source) => {\n    this.setState({ source, dirty: true });\n  };\n\n  synthesize = async () => {\n    await this.updateTemplate(this.state.source);\n    this.setState({ dirty: false });\n  };\n\n  render() {\n    const { width, height } = this.props;\n    return width > 0 && height > 0 ? (\n      <>\n        <Tabs\n          className=\"mb-3\"\n          defaultActiveKey={this.DefaultTab}\n          activeKey={this.state.tab}\n          onSelect={(tab) => {\n            this.setState({ tab });\n            window.location.hash = `#${tab}`;\n            if (tab === this.Tabs.cfn) return this.synthesize();\n          }}\n        >\n          <Tab eventKey={this.Tabs.cdk} title={this.Tabs.cdk}>\n            <Editor\n              width={`${width}px`}\n              height={`${height}px`}\n              theme=\"vs-dark\"\n              path=\"app.js\"\n              language=\"javascript\"\n              defaultValue={DEFAULT_STACK_PROGRAM}\n              onChange={this.handleOnEditorChanged}\n            />\n          </Tab>\n          <Tab\n            eventKey={this.Tabs.cfn}\n            title={`${this.Tabs.cfn}${this.state.dirty ? \"*\" : \"\"}`}\n            tabClassName={\n              this.state.dirty ? \"font-weight-bold text-uppercase text-warning\" : \"font-weight-light text-lowercase\"\n            }\n          >\n            <Editor\n              width={`${width}px`}\n              height={`${height}px`}\n              theme=\"vs-dark\"\n              path={\"cfn-template.json\"}\n              options={{ readOnly: true }}\n              language=\"json\"\n              value={JSON.stringify(this.state.template, null, 2)}\n            />\n          </Tab>\n          <Tab\n            title={this.Tabs.dia}\n            eventKey={this.Tabs.dia}\n            style={{ boxShadow: \"0 0 5px 5px #111\" }}\n            tabClassName=\"font-weight-light text-lowercase\"\n          >\n            <Iframe width={`${width}px`} height={`${height}px`} src={this.state.rendered} />\n          </Tab>\n          <Tab eventKey={this.Tabs.about} title={this.Tabs.about}>\n            <Editor\n              width={`${width}px`}\n              height={`${height}px`}\n              theme=\"vs-dark\"\n              path=\"ABOUT.md\"\n              options={{ readOnly: true }}\n              language=\"markdown\"\n              value={stripIndent(`\\\n                # CDK WEB Playground\n                Try out AWS CDK directly in your browser!\n\n                ## versions\n                cdk-web version: ${require(\"../package.json\").version}\n                aws-cdk-lib version: ${require(\"aws-cdk-lib/package.json\").version}\n                constructs version: ${require(\"constructs/package.json\").version}\n\n                ## help and support:\n                go to the repository: https://github.com/3p3r/cdk-web/`)}\n            />\n          </Tab>\n        </Tabs>\n        {this.state.tab === this.Tabs.cdk && (\n          <Button variant=\"warning\" className=\"position-absolute synthesis-button\" onClick={this.synthesize}>\n            Synthesize\n          </Button>\n        )}\n      </>\n    ) : null;\n  }\n}\n\nexport default App;\n","const lazyLoadScript = (src = \"\") => {\n  const scripts = Array.from(document.getElementsByTagName(\"script\")).map(\n    (s) => s.src\n  );\n  if (scripts.includes(src)) {\n    return new Promise((resolve) => resolve());\n  }\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.src = src;\n    const body = document.getElementsByTagName(\"body\")[0];\n    body?.parentNode?.insertBefore(script, body);\n    script.addEventListener(\"load\", (e) => {\n      resolve(e);\n    });\n  });\n};\n\nexport default lazyLoadScript;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","/// <reference types=\"..\" />\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Grid } from \"react-loader-spinner\";\nimport { Alert, Container } from \"react-bootstrap\";\nimport { withResizeDetector } from \"react-resize-detector\";\n\nimport App from \"./App\";\nimport lazyLoadScript from \"./lazyLoadScript\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"github-fork-ribbon-css/gh-fork-ribbon.css\";\nimport \"@forevolve/bootstrap-dark/dist/css/bootstrap-dark.min.css\";\nimport \"./index.css\";\n\nclass Index extends React.Component {\n  state = { ready: false, errors: [] };\n\n  handleOnError = (error) => {\n    const message = error.message || error.reason.message || \"unknown error, check your dev console.\";\n    console.error(\"cdk-web encountered an error\", error);\n    this.setState({ errors: [message, ...this.state.errors] });\n  };\n\n  initErrorHandling = () => {\n    window.onerror = (message, file, line, col, error) => {\n      this.handleOnError(error);\n      return false;\n    };\n    window.addEventListener(\"error\", (e) => {\n      this.handleOnError(e.error);\n      return false;\n    });\n    window.addEventListener(\"unhandledrejection\", (e) => {\n      this.handleOnError(e.reason);\n    });\n  };\n\n  freeErrorHandling = () => {\n    window.onerror = undefined;\n    window.removeEventListener(\"error\", this.handleOnError);\n    window.removeEventListener(\"unhandledrejection\", this.handleOnError);\n  };\n\n  componentDidMount = () => {\n    this.initErrorHandling();\n    if (window.AWS && window.CDK) this.setState({ ready: true });\n    else {\n      lazyLoadScript(\"https://sdk.amazonaws.com/js/aws-sdk-2.1000.0.min.js\").then(() =>\n        lazyLoadScript(\"cdk-web.js\").then(() => {\n          this.setState({ ready: true });\n        })\n      );\n    }\n  };\n\n  componentWillUnmount = () => {\n    this.freeErrorHandling();\n  };\n\n  canRender = () => {\n    const { width, height } = this.props;\n    return width > 0 && height > 0 && this.state.ready && window.CDK !== undefined && window.AWS !== undefined;\n  };\n\n  render() {\n    const { width, height } = this.props;\n    return (\n      <Container fluid className=\"w-100 h-100 p-0 m-0\">\n        {this.canRender() ? (\n          <>\n            {this.state.errors.length > 0 && (\n              <Alert dismissible variant=\"danger\" onClose={() => this.setState({ errors: [] })}>\n                <Alert.Heading>Oh snap! CDK Synthesis failed!</Alert.Heading>\n                <p>check error message below:</p>\n                <p className=\"text-monospace\">\n                  {this.state.errors.map((e) => (\n                    <span key={e}>\n                      <em>error</em>: <small>{e}</small>\n                      <br />\n                    </span>\n                  ))}\n                </p>\n              </Alert>\n            )}\n            <App width={width} height={height} />\n          </>\n        ) : (\n          <Grid wrapperClass=\"loading-spinner\" height=\"100\" width=\"100\" color=\"#5050EC\" ariaLabel=\"loading\" />\n        )}\n        <a\n          className=\"github-fork-ribbon\"\n          href=\"https://github.com/3p3r/cdk-web/\"\n          data-ribbon=\"Fork this on GitHub\"\n          title=\"Fork this on GitHub\"\n        >\n          Fork this on GitHub\n        </a>\n      </Container>\n    );\n  }\n}\n\nconst ResizeAwareIndex = withResizeDetector(Index);\nReactDOM.render(<ResizeAwareIndex />, document.getElementById(\"root\"));\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}